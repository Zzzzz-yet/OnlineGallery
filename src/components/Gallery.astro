---
import media from '../../media.json';
---

<div style="display: grid; gap: 1rem;">
  {media.map(item => (
    <div style="border: 1px solid #ccc; padding: 0.5rem;">
      <h3>{item.title}</h3>
      {item.type === 'image' ? (
        <img src={item.src} alt={item.title} width="400" />
      ) : (
        <iframe width="400" height="225" src={item.src} frameborder="0" allowfullscreen></iframe>
      )}
      <button onclick={`likeMedia('${item.id}')`}>LIKE</button>
    </div>
  ))}
</div>

<script>
function likeMedia(id) {
  const liked = JSON.parse(localStorage.getItem('liked') || '[]');
  if (!liked.includes(id)) {
    liked.push(id);
    localStorage.setItem('liked', JSON.stringify(liked));
    alert('Liked!');
  } else {
    alert('Already liked!');
  }
}
</script>